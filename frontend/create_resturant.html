<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Create Restaurant</title>
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <!-- Navigation Header -->
    <nav class="nav-header">
      <div class="nav-container">
        <div class="nav-logo">
          <h2>üçΩÔ∏è FoodHub</h2>
        </div>
        <ul class="nav-menu" id="navMenu">
          <!-- Current page link is hidden -->
          <li class="nav-item">
            <a href="add-food.html" class="nav-link">
              <span class="nav-icon">üçï</span>
              <span>Add Food</span>
            </a>
          </li>
          <li class="nav-item">
            <a href="index.html" class="nav-link">
              <span class="nav-icon">üîç</span>
              <span>Search Food</span>
            </a>
          </li>
        </ul>
        <div class="nav-toggle" id="navToggle">
          <span></span>
          <span></span>
          <span></span>
        </div>
      </div>
    </nav>

    <!-- Main Content Wrapper -->
    <div class="main-wrapper">
      <div class="container">
        <div class="header">
          <h1>Create Restaurant</h1>
          <p>Add your restaurant to our directory</p>
        </div>

        <form
          id="restaurantForm"
          action="https://restaurant-app-6rtf.onrender.com/pyrestaurant/create"
          method="POST"
        >
          <div class="form-group">
            <label for="name"
              >Restaurant Name <span class="required">*</span></label
            >
            <input
              type="text"
              id="name"
              name="name"
              placeholder="Enter restaurant name"
              required
            />
          </div>

          <div class="form-row">
            <div class="form-group">
              <label for="country"
                >Country <span class="required">*</span></label
              >
              <select id="country" name="country" required>
                <option value="">Select Country</option>
              </select>
            </div>
            <div class="form-group">
              <label for="state"
                >State/Province <span class="required">*</span></label
              >
              <select id="state" name="state" required>
                <option value="">Select Country First</option>
              </select>
            </div>
          </div>

          <div class="form-group">
            <label for="foodType"
              >Type of Food <span class="required">*</span></label
            >
            <select id="foodType" name="type" required>
              <option value="">Select Food Type</option>
              <option value="African">African</option>
              <option value="American">American</option>
              <option value="BBQ">BBQ</option>
              <option value="Brazilian">Brazilian</option>
              <option value="British">British</option>
              <option value="Cafe">Cafe</option>
              <option value="Caribbean">Caribbean</option>
              <option value="Chinese">Chinese</option>
              <option value="Ethiopian">Ethiopian</option>
              <option value="Fast Food">Fast Food</option>
              <option value="French">French</option>
              <option value="Greek">Greek</option>
              <option value="Indian">Indian</option>
              <option value="Indonesian">Indonesian</option>
              <option value="Italian">Italian</option>
              <option value="Japanese">Japanese</option>
              <option value="Korean">Korean</option>
              <option value="Lebanese">Lebanese</option>
              <option value="Mediterranean">Mediterranean</option>
              <option value="Mexican">Mexican</option>
              <option value="Middle Eastern">Middle Eastern</option>
              <option value="Nigerian">Nigerian</option>
              <option value="Pakistani">Pakistani</option>
              <option value="Pizza">Pizza</option>
              <option value="Seafood">Seafood</option>
              <option value="Spanish">Spanish</option>
              <option value="Street Food">Street Food</option>
              <option value="Sushi">Sushi</option>
              <option value="Swahili">Swahili</option>
              <option value="Thai">Thai</option>
              <option value="Turkish">Turkish</option>
              <option value="Vegetarian">Vegetarian</option>
              <option value="Vietnamese">Vietnamese</option>
              <option value="Other">Other</option>
            </select>
          </div>

          <input type="submit" class="create-btn" value="Create Restaurant" />
        </form>

        <div id="successMessage" class="success-message" style="display: none">
          <div class="success-content">
            <div class="success-icon">‚úì</div>
            <h2>Restaurant Created Successfully!</h2>
            <p>Your restaurant has been added to our directory.</p>
            <div class="button-group">
              <button onclick="resetForm()" class="reset-btn">
                Create Another Restaurant
              </button>
              <button onclick="goToAddFood()" class="secondary-btn">
                Add Food
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>

    <script src="nav-script.js"></script>
    <script>
      // Countries and their states/provinces data
      const countriesAndStates = {
        Afghanistan: ["Kabul", "Kandahar", "Herat", "Mazar-i-Sharif", "Kunduz"],
        Albania: ["Tirana", "Durr√´s", "Vlor√´", "Shkod√´r", "Fier"],
        Algeria: ["Algiers", "Oran", "Constantine", "Annaba", "Blida"],
        Argentina: [
          "Buenos Aires",
          "C√≥rdoba",
          "Santa Fe",
          "Mendoza",
          "Tucum√°n",
        ],
        Australia: [
          "New South Wales",
          "Victoria",
          "Queensland",
          "Western Australia",
          "South Australia",
          "Tasmania",
          "Northern Territory",
          "Australian Capital Territory",
        ],
        Austria: [
          "Vienna",
          "Styria",
          "Upper Austria",
          "Lower Austria",
          "Tyrol",
          "Salzburg",
          "Carinthia",
          "Vorarlberg",
          "Burgenland",
        ],
        Bangladesh: [
          "Dhaka",
          "Chittagong",
          "Rajshahi",
          "Khulna",
          "Barisal",
          "Sylhet",
          "Rangpur",
          "Mymensingh",
        ],
        Belgium: [
          "Brussels",
          "Antwerp",
          "East Flanders",
          "West Flanders",
          "Walloon Brabant",
          "Flemish Brabant",
          "Li√®ge",
          "Namur",
          "Hainaut",
          "Limburg",
          "Luxembourg",
        ],
        Brazil: [
          "S√£o Paulo",
          "Rio de Janeiro",
          "Minas Gerais",
          "Bahia",
          "Paran√°",
          "Rio Grande do Sul",
          "Pernambuco",
          "Cear√°",
          "Par√°",
          "Santa Catarina",
          "Goi√°s",
          "Maranh√£o",
          "Para√≠ba",
          "Esp√≠rito Santo",
          "Piau√≠",
          "Alagoas",
          "Rio Grande do Norte",
          "Mato Grosso",
          "Mato Grosso do Sul",
          "Distrito Federal",
          "Sergipe",
          "Rond√¥nia",
          "Acre",
          "Amazonas",
          "Roraima",
          "Amap√°",
          "Tocantins",
        ],
        Canada: [
          "Alberta",
          "British Columbia",
          "Manitoba",
          "New Brunswick",
          "Newfoundland and Labrador",
          "Northwest Territories",
          "Nova Scotia",
          "Nunavut",
          "Ontario",
          "Prince Edward Island",
          "Quebec",
          "Saskatchewan",
          "Yukon",
        ],
        Chile: [
          "Santiago Metropolitan",
          "Valpara√≠so",
          "Biob√≠o",
          "Araucan√≠a",
          "Los Lagos",
          "Maule",
          "O'Higgins",
          "Coquimbo",
          "Antofagasta",
          "Los R√≠os",
          "Tarapac√°",
          "Atacama",
          "Ays√©n",
          "Magallanes",
          "Arica y Parinacota",
          "√ëuble",
        ],
        China: [
          "Beijing",
          "Shanghai",
          "Guangdong",
          "Shandong",
          "Henan",
          "Sichuan",
          "Jiangsu",
          "Hebei",
          "Hunan",
          "Anhui",
          "Hubei",
          "Zhejiang",
          "Guangxi",
          "Yunnan",
          "Jiangxi",
          "Liaoning",
          "Fujian",
          "Shaanxi",
          "Heilongjiang",
          "Shanxi",
          "Guizhou",
          "Chongqing",
          "Jilin",
          "Gansu",
          "Inner Mongolia",
          "Xinjiang",
          "Tianjin",
          "Qinghai",
          "Hainan",
          "Ningxia",
          "Tibet",
        ],
        Colombia: [
          "Bogot√°",
          "Antioquia",
          "Valle del Cauca",
          "Atl√°ntico",
          "Santander",
          "Bol√≠var",
          "Cundinamarca",
          "Norte de Santander",
          "C√≥rdoba",
          "Tolima",
          "Huila",
          "Nari√±o",
          "Meta",
          "Cesar",
          "Boyac√°",
          "Sucre",
          "La Guajira",
          "Cauca",
          "Magdalena",
          "Caldas",
          "Risaralda",
          "Quind√≠o",
          "Casanare",
          "Choc√≥",
          "Caquet√°",
          "Putumayo",
          "Arauca",
          "San Andr√©s y Providencia",
          "Amazonas",
          "Guain√≠a",
          "Guaviare",
          "Vaup√©s",
          "Vichada",
        ],
        Egypt: [
          "Cairo",
          "Alexandria",
          "Giza",
          "Shubra El Kheima",
          "Port Said",
          "Suez",
          "Luxor",
          "Mansoura",
          "El Mahalla El Kubra",
          "Tanta",
          "Asyut",
          "Ismailia",
          "Fayyum",
          "Zagazig",
          "Aswan",
          "Damietta",
          "Damanhur",
          "Minya",
          "Beni Suef",
          "Hurghada",
          "Qena",
          "Sohag",
          "Shibin El Kom",
          "Banha",
          "Kafr el-Sheikh",
          "Arish",
          "Mallawi",
          "10th of Ramadan City",
          "Bilbays",
          "Marsa Matruh",
        ],
        France: [
          "√éle-de-France",
          "Auvergne-Rh√¥ne-Alpes",
          "Hauts-de-France",
          "Nouvelle-Aquitaine",
          "Occitanie",
          "Grand Est",
          "Provence-Alpes-C√¥te d'Azur",
          "Pays de la Loire",
          "Normandy",
          "Brittany",
          "Bourgogne-Franche-Comt√©",
          "Centre-Val de Loire",
          "Corsica",
        ],
        Germany: [
          "North Rhine-Westphalia",
          "Bavaria",
          "Baden-W√ºrttemberg",
          "Lower Saxony",
          "Hesse",
          "Saxony",
          "Rhineland-Palatinate",
          "Berlin",
          "Schleswig-Holstein",
          "Brandenburg",
          "Saxony-Anhalt",
          "Thuringia",
          "Hamburg",
          "Mecklenburg-Vorpommern",
          "Saarland",
          "Bremen",
        ],
        India: [
          "Andhra Pradesh",
          "Arunachal Pradesh",
          "Assam",
          "Bihar",
          "Chhattisgarh",
          "Goa",
          "Gujarat",
          "Haryana",
          "Himachal Pradesh",
          "Jharkhand",
          "Karnataka",
          "Kerala",
          "Madhya Pradesh",
          "Maharashtra",
          "Manipur",
          "Meghalaya",
          "Mizoram",
          "Nagaland",
          "Odisha",
          "Punjab",
          "Rajasthan",
          "Sikkim",
          "Tamil Nadu",
          "Telangana",
          "Tripura",
          "Uttar Pradesh",
          "Uttarakhand",
          "West Bengal",
          "Delhi",
          "Jammu and Kashmir",
          "Ladakh",
          "Puducherry",
          "Chandigarh",
          "Dadra and Nagar Haveli and Daman and Diu",
          "Lakshadweep",
          "Andaman and Nicobar Islands",
        ],
        Indonesia: [
          "Jakarta",
          "West Java",
          "East Java",
          "Central Java",
          "North Sumatra",
          "Banten",
          "South Sulawesi",
          "Lampung",
          "Central Sulawesi",
          "West Sumatra",
          "South Sumatra",
          "East Kalimantan",
          "Riau",
          "Yogyakarta",
          "Aceh",
          "North Sulawesi",
          "South Kalimantan",
          "West Sulawesi",
          "Jambi",
          "West Nusa Tenggara",
          "Bengkulu",
          "Central Kalimantan",
          "Southeast Sulawesi",
          "Riau Islands",
          "Bangka Belitung",
          "Bali",
          "Gorontalo",
          "West Kalimantan",
          "Maluku",
          "East Nusa Tenggara",
          "Papua",
          "North Maluku",
          "West Papua",
        ],
        Italy: [
          "Lombardy",
          "Lazio",
          "Campania",
          "Sicily",
          "Veneto",
          "Emilia-Romagna",
          "Piedmont",
          "Apulia",
          "Tuscany",
          "Calabria",
          "Sardinia",
          "Liguria",
          "Marche",
          "Abruzzo",
          "Friuli-Venezia Giulia",
          "Trentino-Alto Adige",
          "Umbria",
          "Basilicata",
          "Molise",
          "Aosta Valley",
        ],
        Japan: [
          "Tokyo",
          "Kanagawa",
          "Osaka",
          "Aichi",
          "Saitama",
          "Chiba",
          "Hyogo",
          "Hokkaido",
          "Fukuoka",
          "Shizuoka",
          "Ibaraki",
          "Kyoto",
          "Hiroshima",
          "Sendai",
          "Niigata",
          "Kumamoto",
          "Kagoshima",
          "Okayama",
          "Fukushima",
          "Mie",
          "Gunma",
          "Tochigi",
          "Gifu",
          "Nagano",
          "Yamaguchi",
          "Ehime",
          "Aomori",
          "Okinawa",
          "Shiga",
          "Nara",
          "Miyagi",
          "Nagasaki",
          "Oita",
          "Yamagata",
          "Iwate",
          "Akita",
          "Miyazaki",
          "Toyama",
          "Yamanashi",
          "Saga",
          "Ishikawa",
          "Wakayama",
          "Fukui",
          "Kochi",
          "Shimane",
          "Tokushima",
          "Tottori",
        ],
        Mexico: [
          "Mexico City",
          "State of Mexico",
          "Jalisco",
          "Veracruz",
          "Puebla",
          "Guanajuato",
          "Chiapas",
          "Nuevo Le√≥n",
          "Michoac√°n",
          "Oaxaca",
          "Chihuahua",
          "Guerrero",
          "Tamaulipas",
          "Baja California",
          "Sinaloa",
          "Coahuila",
          "Hidalgo",
          "Sonora",
          "San Luis Potos√≠",
          "Tabasco",
          "Yucat√°n",
          "Quer√©taro",
          "Morelos",
          "Durango",
          "Zacatecas",
          "Quintana Roo",
          "Tlaxcala",
          "Aguascalientes",
          "Nayarit",
          "Campeche",
          "Baja California Sur",
          "Colima",
        ],
        Nigeria: [
          "Lagos",
          "Kano",
          "Ibadan",
          "Kaduna",
          "Port Harcourt",
          "Benin City",
          "Maiduguri",
          "Zaria",
          "Aba",
          "Jos",
          "Ilorin",
          "Oyo",
          "Enugu",
          "Abeokuta",
          "Abuja",
          "Sokoto",
          "Onitsha",
          "Warri",
          "Okene",
          "Calabar",
          "Uyo",
          "Katsina",
          "Ado-Ekiti",
          "Ogbomoso",
          "Akure",
          "Osogbo",
          "Bauchi",
          "Katsina-Ala",
          "Gombe",
          "Ikeja",
          "Agege",
          "Minna",
          "Effon-Alaiye",
          "Ilesa",
          "Sapele",
          "Kano",
          "Kaduna",
          "Ibadan",
          "Lagos",
        ],
        Russia: [
          "Moscow",
          "Saint Petersburg",
          "Novosibirsk",
          "Yekaterinburg",
          "Nizhny Novgorod",
          "Kazan",
          "Chelyabinsk",
          "Omsk",
          "Samara",
          "Rostov-on-Don",
          "Ufa",
          "Krasnoyarsk",
          "Perm",
          "Voronezh",
          "Volgograd",
          "Krasnodar",
          "Saratov",
          "Tyumen",
          "Tolyatti",
          "Izhevsk",
        ],
        "South Africa": [
          "Gauteng",
          "KwaZulu-Natal",
          "Western Cape",
          "Eastern Cape",
          "Limpopo",
          "Mpumalanga",
          "North West",
          "Free State",
          "Northern Cape",
        ],
        Spain: [
          "Andalusia",
          "Catalonia",
          "Community of Madrid",
          "Valencian Community",
          "Galicia",
          "Castile and Le√≥n",
          "Basque Country",
          "Canary Islands",
          "Castile-La Mancha",
          "Region of Murcia",
          "Aragon",
          "Extremadura",
          "Balearic Islands",
          "Asturias",
          "Navarre",
          "Cantabria",
          "La Rioja",
        ],
        Turkey: [
          "Istanbul",
          "Ankara",
          "ƒ∞zmir",
          "Bursa",
          "Antalya",
          "Adana",
          "Konya",
          "≈ûanlƒ±urfa",
          "Gaziantep",
          "Kayseri",
          "Mersin",
          "Eski≈üehir",
          "Diyarbakƒ±r",
          "Samsun",
          "Denizli",
          "Adapazarƒ±",
          "Malatya",
          "Kahramanmara≈ü",
          "Erzurum",
          "Van",
        ],
        "United Kingdom": ["England", "Scotland", "Wales", "Northern Ireland"],
        "United States": [
          "Alabama",
          "Alaska",
          "Arizona",
          "Arkansas",
          "California",
          "Colorado",
          "Connecticut",
          "Delaware",
          "Florida",
          "Georgia",
          "Hawaii",
          "Idaho",
          "Illinois",
          "Indiana",
          "Iowa",
          "Kansas",
          "Kentucky",
          "Louisiana",
          "Maine",
          "Maryland",
          "Massachusetts",
          "Michigan",
          "Minnesota",
          "Mississippi",
          "Missouri",
          "Montana",
          "Nebraska",
          "Nevada",
          "New Hampshire",
          "New Jersey",
          "New Mexico",
          "New York",
          "North Carolina",
          "North Dakota",
          "Ohio",
          "Oklahoma",
          "Oregon",
          "Pennsylvania",
          "Rhode Island",
          "South Carolina",
          "South Dakota",
          "Tennessee",
          "Texas",
          "Utah",
          "Vermont",
          "Virginia",
          "Washington",
          "West Virginia",
          "Wisconsin",
          "Wyoming",
          "District of Columbia",
        ],
      };

      // Populate countries dropdown
      function populateCountries() {
        const countrySelect = document.getElementById("country");
        const countries = Object.keys(countriesAndStates).sort();

        countries.forEach((country) => {
          const option = document.createElement("option");
          option.value = country;
          option.textContent = country;
          countrySelect.appendChild(option);
        });
      }

      // Update states based on selected country
      function updateStates() {
        const countrySelect = document.getElementById("country");
        const stateSelect = document.getElementById("state");
        const selectedCountry = countrySelect.value;

        // Clear existing options
        stateSelect.innerHTML =
          '<option value="">Select State/Province</option>';

        if (selectedCountry && countriesAndStates[selectedCountry]) {
          const states = countriesAndStates[selectedCountry];
          states.forEach((state) => {
            const option = document.createElement("option");
            option.value = state;
            option.textContent = state;
            stateSelect.appendChild(option);
          });
          stateSelect.disabled = false;
        } else {
          stateSelect.innerHTML =
            '<option value="">Select Country First</option>';
          stateSelect.disabled = true;
        }
      }

      // Initialize countries on page load
      document.addEventListener("DOMContentLoaded", function () {
        populateCountries();

        // Add event listener for country change
        document
          .getElementById("country")
          .addEventListener("change", updateStates);
      });

      document
        .getElementById("restaurantForm")
        .addEventListener("submit", async function (e) {
          e.preventDefault();

          const form = e.target;
          const submitBtn = form.querySelector('input[type="submit"]');
          submitBtn.value = "Creating Restaurant...";
          submitBtn.disabled = true;

          const formData = new FormData(form);

          try {
            const response = await fetch(
              "https://restaurant-app-6rtf.onrender.com/pyrestaurant/create",
              {
                method: "POST",
                body: formData,
                credentials: "include",
              }
            );

            if (response.ok) {
              const result = await response.json();
              console.log("Success:", result);

              form.style.display = "none";
              document.getElementById("successMessage").style.display = "block";
            } else {
              const errorData = await response.json();
              console.error("Server returned error:", errorData);
              alert("Error: " + JSON.stringify(errorData));
            }
          } catch (error) {
            console.error("Fetch error:", error);
            alert(
              "Network error. Please check if the server is running and CORS is configured."
            );
          } finally {
            submitBtn.value = "Create Restaurant";
            submitBtn.disabled = false;
          }
        });

      function resetForm() {
        document.getElementById("restaurantForm").style.display = "block";
        document.getElementById("successMessage").style.display = "none";
        document.getElementById("restaurantForm").reset();
        // Reset state dropdown
        document.getElementById("state").innerHTML =
          '<option value="">Select Country First</option>';
        document.getElementById("state").disabled = true;
      }

      function goToAddFood() {
        window.location.href = "add-food.html";
      }
    </script>
  </body>
</html>
